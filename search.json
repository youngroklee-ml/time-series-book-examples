[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Examples in Time Series Analysis and Application",
    "section": "",
    "text": "Preface\nThis is a R implementation of examples in “Time Series Analysis and Application” by Chi-Hyuck Jun.\n\nBook: 시계열 분석 및 응용\nData download: 자유아카데미 자료실",
    "crumbs": [
      "Preface"
    ]
  },
  {
    "objectID": "ch01_smoothing.html",
    "href": "ch01_smoothing.html",
    "title": "1  Smoothing",
    "section": "",
    "text": "1.1 Example 1.1",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Smoothing</span>"
    ]
  },
  {
    "objectID": "ch01_smoothing.html#example-1.1",
    "href": "ch01_smoothing.html#example-1.1",
    "title": "1  Smoothing",
    "section": "",
    "text": "1.1.1 Data\nCreate a data frame.\n\nforest_fire &lt;- tribble(\n  ~year, ~cnt,\n  2006, 369,\n  2007, 418,\n  2008, 389,\n  2009, 570,\n  2010, 282,\n  2011, 277,\n  2012, 197,\n  2013, 296,\n  2014, 492,\n  2015, 623,\n  2016, 391\n)\n\n\n\n1.1.2 Convert to time-series data\nConvert the data frame to time series data frame (tsibble) object. You must set index with a column that represents timepoints for the series. Please note that tsibble automatically notice that the index is year and that the series is regular yearly series.\n\nforest_fire_ts &lt;-\n  forest_fire |&gt;\n  as_tsibble(index = year)\n\nforest_fire_ts\n\n# A tsibble: 11 x 2 [1Y]\n    year   cnt\n   &lt;dbl&gt; &lt;dbl&gt;\n 1  2006   369\n 2  2007   418\n 3  2008   389\n 4  2009   570\n 5  2010   282\n 6  2011   277\n 7  2012   197\n 8  2013   296\n 9  2014   492\n10  2015   623\n11  2016   391\n\n\n\n\n1.1.3 Moving average\nCompute moving average by calling slider::slide_mean(). Set complete = TRUE to return missing value NA when there are missing observations in the sliding window.\n\nforest_fire_ma &lt;-\n  forest_fire_ts |&gt;\n  mutate(\n    ma3 = slider::slide_mean(cnt, before = 2, after = 0, complete = TRUE),\n    ma6 = slider::slide_mean(cnt, before = 5, after = 0, complete = TRUE)\n  )\n\nforest_fire_ma\n\n# A tsibble: 11 x 4 [1Y]\n    year   cnt   ma3   ma6\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1  2006   369   NA    NA \n 2  2007   418   NA    NA \n 3  2008   389  392    NA \n 4  2009   570  459    NA \n 5  2010   282  414.   NA \n 6  2011   277  376.  384.\n 7  2012   197  252   356.\n 8  2013   296  257.  335.\n 9  2014   492  328.  352.\n10  2015   623  470.  361.\n11  2016   391  502   379.\n\n\nNow, forest_fire_ma is a time series data frame with three series: original value cnt, 3-yr moving average ma3, and 6-yr moving average ma6.\n\n\n1.1.4 Visualization\nCovert this to a long form by calling pivot_longer(). The resulting time series data frame will have key that is a label of each series.\n\nforest_fire_ma_long &lt;- \n  forest_fire_ma |&gt;\n  pivot_longer(c(cnt, ma3, ma6), names_to = \"statistics\")\n\nforest_fire_ma_long\n\n# A tsibble: 33 x 3 [1Y]\n# Key:       statistics [3]\n    year statistics value\n   &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;\n 1  2006 cnt          369\n 2  2006 ma3           NA\n 3  2006 ma6           NA\n 4  2007 cnt          418\n 5  2007 ma3           NA\n 6  2007 ma6           NA\n 7  2008 cnt          389\n 8  2008 ma3          392\n 9  2008 ma6           NA\n10  2009 cnt          570\n# ℹ 23 more rows\n\n\nVisualize time series data. Call autoplot() with measurement variable name to draws line plot by each key.\n\nforest_fire_ma_long |&gt; \n  autoplot(value)\n\nWarning: Removed 7 rows containing missing values or values outside the scale range\n(`geom_line()`).",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Smoothing</span>"
    ]
  },
  {
    "objectID": "ch01_smoothing.html#example-1.2",
    "href": "ch01_smoothing.html#example-1.2",
    "title": "1  Smoothing",
    "section": "1.2 Example 1.2",
    "text": "1.2 Example 1.2\n\n1.2.1 Load data\n\nhousehold &lt;- \n  read_excel(\"data/J01.xlsx\", skip = 1) |&gt; \n  rename(cnt = `#households`)\n\n\n\n1.2.2 Convert to time-series data\n\nhousehold_ts &lt;-\n  household |&gt; \n  as_tsibble(index = year)\n\nhousehold_ts\n\n# A tsibble: 18 x 2 [1Y]\n    year   cnt\n   &lt;dbl&gt; &lt;dbl&gt;\n 1  2000  2255\n 2  2001  2438\n 3  2002  2628\n 4  2003  2818\n 5  2004  3001\n 6  2005  3186\n 7  2006  3378\n 8  2007  3571\n 9  2008  3766\n10  2009  3963\n11  2010  4174\n12  2011  4380\n13  2012  4563\n14  2013  4756\n15  2014  4965\n16  2015  5179\n17  2016  5382\n18  2017  5562\n\n\n\n\n1.2.3 Train/test split\n\nhousehold_ts_train &lt;-\n  household_ts |&gt; \n  filter(year &lt;= 2014)\n\nhousehold_ts_test &lt;-\n  household_ts |&gt; \n  filter(year &gt; 2014)\n\n\n\n1.2.4 Double moving average with N = 4\n\nN &lt;- 4\n\nhousehold_double_ma &lt;-\n  household_ts_train |&gt; \n  mutate(\n    ma = slider::slide_mean(cnt, before = N - 1, after = 0, complete = TRUE),\n    ma_double = slider::slide_mean(ma, before = N - 1, after = 0, complete = TRUE)\n  )\n\nhousehold_double_ma\n\n# A tsibble: 15 x 4 [1Y]\n    year   cnt    ma ma_double\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;\n 1  2000  2255   NA        NA \n 2  2001  2438   NA        NA \n 3  2002  2628   NA        NA \n 4  2003  2818 2535.       NA \n 5  2004  3001 2721.       NA \n 6  2005  3186 2908.       NA \n 7  2006  3378 3096.     2815 \n 8  2007  3571 3284      3002.\n 9  2008  3766 3475.     3191.\n10  2009  3963 3670.     3381.\n11  2010  4174 3868.     3574.\n12  2011  4380 4071.     3771 \n13  2012  4563 4270      3970.\n14  2013  4756 4468.     4169.\n15  2014  4965 4666      4369.\n\n\nVisualize results.\n\nhousehold_double_ma |&gt; \n  pivot_longer(c(cnt, ma, ma_double), names_to = \"statistics\") |&gt; \n  autoplot(value)\n\nWarning: Removed 9 rows containing missing values or values outside the scale range\n(`geom_line()`).\n\n\n\n\n\n\n\n\n\n\n\n1.2.5 Estimate a slope\nTake the latest moving average and double moving average.\n\nlatest &lt;- \n  household_double_ma |&gt; \n  slice_tail(n = 1)\n\nlatest\n\n# A tsibble: 1 x 4 [1Y]\n   year   cnt    ma ma_double\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;\n1  2014  4965  4666     4369.\n\n\nCompute a slope\n\nb &lt;- (latest$ma - latest$ma_double) / (N - 1) * 2\nb\n\n[1] 198.1667\n\n\n\n\n1.2.6 Prediction\n\nhousehold_ts_test |&gt; \n  mutate(\n    ma = latest$ma,\n    ma_double = 2 * latest$ma - latest$ma_double + (year - latest$year) * b\n  )\n\n# A tsibble: 3 x 4 [1Y]\n   year   cnt    ma ma_double\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;\n1  2015  5179  4666     5161.\n2  2016  5382  4666     5360.\n3  2017  5562  4666     5558.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Smoothing</span>"
    ]
  }
]